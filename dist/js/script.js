!function(d){"undefined"!=typeof NodeList&&NodeList.prototype&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=Array.prototype.forEach);document.querySelectorAll(".ga-ce").forEach(function(e,t){e.addEventListener("click",function(){var e=this.dataset.category||null,t=this.dataset.action||null,i=this.dataset.label||null,a=this.dataset.value||1;window.ga&&ga.create&&ga("send","event",e,t,i,a,null)})});({triggers:d(".share-popup"),init:function(){var t=this;t.triggers.click(function(e){e.preventDefault(),t.popup(d(this).attr("href"))})},popup:function(e){(popupWindow=window.open(e,"","width=600,height=400")).focus()}}).init();var n={view:d(".screen"),bios:d(".screen .bios"),started:!1,loading:{audio:!1,video:!1},ambientAudio:new Audio("sound/ambient.mp3"),audioPlayer:document.createElement("audio"),text:["<p>niniOS</p><p>Copyright (c) 1997,"+(new Date).getFullYear()+". All Rights Reserved</p><p>BIOS Version: 0.1.1.2</p><p>Core Singularity Matrix: Version 3.5.8.12</p><br />","<p>Quantum Battery Status: 98% - Harmonized</p>","<p>Neural Memory Alignment: 16384K - Synchronized</p>","<p>Aligning Multiverse Interfaces ... Unified</p>","<br /><p>niniOS signifies the creative interplay between two worlds - expanding perspectives on what an operating system can be. By infusing technology with shades of humanity, this OS blends the precision of code with the wild, untamed pulse of the universe - connecting silicon with the soul.</p>","<br /><br />","<p>Press Any Key to boot system</p>"],actionHandlers:[["play",()=>{this.resumeTrack()}],["pause",()=>{this.pauseTrack()}],["stop",()=>{this.stopTrack()}]],init:function(){var t,e,i=this,a=(i.setBodyHeight(),navigator.userAgent.toLowerCase());i.isIPhone=-1!=a.indexOf("iphone"),i.displayTime(),setTimeout(function(){i.boot()},100);for([t,e]of i.actionHandlers)try{navigator.mediaSession.setActionHandler(t,e)}catch(e){console.log(`The media session action "${t}" is not supported yet.`)}d(window).on("keyup click",function(e){n.started||(i.bios.hide(),i.setLoading(!0),setTimeout(function(){d(".login").addClass("loaded"),i.setLoading(!1)},1500),n.started=!0)}),i.ambientAudio.loop=!0,i.ambientAudio.volume=0,i.ambientAudio.addEventListener("timeupdate",function(){this.currentTime>this.duration-.44&&(this.currentTime=0,this.play())}),d(i.audioPlayer).on("ended",function(){i.stopTrack()}),d(i.audioPlayer).on("stalled",function(){console.log("audio stalled"),this.load()}),d("#video").on("stalled",function(){console.log("video stalled"),this.load()}),"mediaSession"in navigator&&(navigator.mediaSession.setActionHandler("pause",()=>{i.pauseTrack()}),navigator.mediaSession.setActionHandler("play",()=>{i.resumeTrack()}),navigator.mediaSession.setActionHandler("seekto",e=>{i.audioPlayer.currentTime=e.seekTime}))},setBodyHeight:function(){d("body").css("height",window.innerHeight),setTimeout(this.setBodyHeight,100)},setLoading:function(e){e?d("body").addClass("loading"):d("body").removeClass("loading")},formatAMPM:function(e){var t=e.getHours(),i=e.getMinutes(),a=12<=t?"PM":"AM";return(t=(t%=12)||12)+":"+(i<10?"0"+i:i)+a+"<span> - "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][e.getMonth()]+". "+e.getDate()+", "+e.getFullYear()+"</span>"},displayTime:function(){var e=this,t=e.formatAMPM(new Date);d("#time").html(t),setTimeout(function(){e.displayTime()},1e3)},boot:function(){var i=this;i.isIPhone&&d(".hide-on-ios").hide(),d("body").addClass("crt"),i.view.fadeIn(100,function(){d.each(i.text,function(e,t){setTimeout(function(){i.bios.append(t)},700*e)})})},toggleAmbientSound:function(e){e?d(this.ambientAudio).animate({volume:.2},3e3):d(this.ambientAudio).animate({volume:0},8e3)},loadTrack:function(e){var t=this,i=(t.loading.video=!1,t.loading.audio=!1,t.setLoading(!0),d(t.audioPlayer).on("canplay",function(){t.playTrack("audio")}),d("#video").on("canplay",function(){t.playTrack("video")}),(t.playingTrack=e).addClass("active playing"),e.attr("data-sound")),a=e.attr("data-video"),n=e.attr("data-title"),e=e.attr("data-album");d("#video .mpeg").attr("src","video/"+a+".mp4"),d("#video .webm").attr("src","video/"+a+".webm"),d("#video").get(0).load(),t.audioPlayer.src="sound/"+i,t.audioPlayer.load(),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:n,artist:"Toasty Digital",album:e,artwork:[{src:"img/cover/"+e+"_96x96.png",sizes:"96x96",type:"image/png"},{src:"img/cover/"+e+"_128x128.png",sizes:"128x128",type:"image/png"},{src:"img/cover/"+e+"_192x192.png",sizes:"192x192",type:"image/png"},{src:"img/cover/"+e+"_256x256.png",sizes:"256x256",type:"image/png"},{src:"img/cover/"+e+"_384x384.png",sizes:"384x384",type:"image/png"},{src:"img/cover/"+e+"_512x512.png",sizes:"512x512",type:"image/png"}]}))},playTrack:function(e){var t=this;"audio"==e&&(t.loading.audio=!0),"video"==e&&(t.loading.video=!0),t.loading.audio&&t.loading.video&&(t.setLoading(!1),t.resumeTrack(),d("body").addClass("media-playing"),"mediaSession"in navigator)&&(navigator.mediaSession.playbackState="playing")},stopTrack:function(){var e=this;d(e.audioPlayer).unbind("canplay"),d("#video").unbind("canplay"),d("body").removeClass("media-playing"),d("#video").stop(!0,!0).fadeOut(800),setTimeout(function(){d("#video").get(0).pause()},800),e.audioPlayer.pause(),e.playingTrack.removeClass("active playing"),"mediaSession"in navigator&&(navigator.mediaSession.playbackState="paused")},pauseTrack:function(){d("#video").get(0).pause(),this.audioPlayer.pause(),navigator.mediaSession.playbackState="paused"},resumeTrack:function(){d("#video").stop(!0,!0).fadeIn(800),d("#video").get(0).play(),this.audioPlayerPromise=this.audioPlayer.play()}};n.init(),d(".login .hint a").on("click",function(e){e.preventDefault(),d(this).parent(".hint").find("a").hide(),d(this).parent(".hint").find("span").show()}),d(".login form").on("submit",function(e){e.preventDefault();e=d(".login form input[type=password]").val().toLowerCase();["YXJpZXM=","dGF1cnVz","Z2VtaW5p","Y2FuY2Vy","bGVv","dmlyZ28=","bGlicmE=","c2NvcnBpbw==","c2FnaXR0YXJpdXM=","Y2Fwcmljb3Ju","YXF1YXJpdXM=","cGlzY2Vz"].includes(btoa(e))?(d(".login").removeClass("loaded"),setTimeout(function(){d(".login").hide(),n.toggleAmbientSound(!1),n.setLoading(!1)},1800)):d(".login form input[type=password]").val("")}),d(".navbar .item.submenu button").on("click",function(e){d(this).parent(".submenu").hasClass("active")?d(".navbar .item.submenu.active").removeClass("active"):(d(".navbar .item.submenu.active").removeClass("active"),d(this).parent(".submenu").addClass("active"))}),d("body").on("click",function(e){d(e.target).closest(".item.submenu.active").length<=0&&d(".navbar .item.submenu.active").removeClass("active"),d(e.target).closest(".dialog, .navbar").length<=0&&d(".dialog").css("display","none").html(""),d(".file").removeClass("active")}),d(".disabled").on("click",function(e){e.preventDefault()}),d("#about").on("click",function(e){e.preventDefault(),d(".navbar .item.submenu.active").removeClass("active");d(".dialog").html('<div><p>Mixtapes by <a href="https://twitter.com/jonsantoast" target="_blank">toasty digital</a><br />Website by <a href="https://twitter.com/starfennec" target="_blank">starfennec</a><br />Funny dancing lizard by <a href="https://twitter.com/ka92/" target="_blank">ka92</a></p></div>').css("display","flex")}),d("#battery").on("click",function(e){e.preventDefault(),d(".navbar .item.submenu.active").removeClass("active");d(".dialog").html("<div><p>Your device contains the GuitarBeat Infinity Core - a quantum battery for traversing cosmic dimensions. The Core powers niniOS to channel frequencies beyond perceived reality. Even mild vibrational mismatches may destabilize your journey, so handle with utmost care and avoid sources of cosmic turbulence like heat or moisture.If you feel yourself slipping into a negative thought loop, contact your Guide immediately to re-align the powercells. GuitarBeat is not liable for journeys gone astray. Stay centered and ride the wave.</p></div>").css("display","flex")}),d("#fullscreen").on("click",function(e){e.preventDefault(),d(".navbar .item.submenu.active").removeClass("active");e=document.documentElement;d("body").hasClass("fullscreen")?(document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen(),d("body").removeClass("fullscreen")):(e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.msRequestFullscreen&&e.msRequestFullscreen(),d("body").addClass("fullscreen"))}),d("#restart").on("click",function(e){e.preventDefault(),location.reload()}),d("#print").on("click",function(e){d(".navbar .item.submenu.active").removeClass("active"),e.preventDefault(),window.print()}),d("#switchfiles").on("click",function(e){e.preventDefault(),d(".navbar .item.submenu.active").removeClass("active"),d(this).toggleClass("invert"),d("body").toggleClass("show-hidden-files")}),d("#folder1").on("click",function(e){e.preventDefault(),d(".finder").removeClass("focus"),d(".finder.2k49").addClass("focus").show("slow"),d(this).addClass("active")}),d("#folder2").on("click",function(e){e.preventDefault(),d(".finder").removeClass("focus"),d(".finder.gktfolder").addClass("focus").show("slow"),d(this).addClass("active")}),d("#folder3").on("click",function(e){e.preventDefault(),d(".finder").removeClass("focus"),d(".finder.blondafolder").addClass("focus").show("slow"),d(this).addClass("active")}),d("#folder4").on("click",function(e){e.preventDefault(),d(".finder").removeClass("focus"),d(this).addClass("active"),setTimeout(function(){d(".dialog").html("<div><p>File corrupted!<br />Please download it again.</p></div>").css("display","flex")},0),d(this).addClass("active")}),d("#lizard").on("click",function(e){e.preventDefault(),d("#video2").get(0).play(),d(".finder.fdl").addClass("focus").show()}),d("#readme").on("click",function(e){e.preventDefault(),e.stopPropagation(),d(".finder.readme").addClass("focus").show("slow")}),d("#earththt").on("click",function(e){e.preventDefault(),e.stopPropagation(),d(".finder.earth").addClass("focus").show("slow")}),d(".finder .close").on("click",function(e){e.preventDefault(),d(this).closest(".finder").hide()}),d(".play-track").on("click",function(e){e.preventDefault();var t=d(this);t.hasClass("playing")||(n.setLoading(!0),n.playingTrack?(n.stopTrack(),setTimeout(function(){n.loadTrack(t)},800)):n.loadTrack(t))}),d("#pause").on("click",function(e){e.preventDefault(),n.audioPlayer.paused?(d(this).removeClass("invert"),n.resumeTrack()):(d(this).addClass("invert"),n.pauseTrack())}),d("#stop").on("click",function(e){e.preventDefault(),d("body").removeClass("media-playing"),n.stopTrack()}),d(".finder").on("mousedown click",function(e){d(".finder.focus").removeClass("focus"),d(this).addClass("focus")}),d(".finder").each(function(e,t){function i(e){var t;(e=e||window.event).cancelable,e=e.touches?(t=e.touches[0].pageX,e.touches[0].pageY):(t=e.clientX,e.clientY),r=t,c=e,document.onmouseup=n,document.ontouchend=n,document.onmousemove=a,document.ontouchmove=a}function a(e){(e=e||window.event).cancelable&&e.preventDefault(),e=e.touches?(t=e.touches[0].pageX,e.touches[0].pageY):(t=e.clientX,e.clientY),s=r-t,l=c-e,r=t,c=e;var t=28<=o.offsetTop-l?o.offsetTop-l:28,e=0<=o.offsetLeft-s?o.offsetLeft-s:0;o.style.top=t+"px",o.style.left=e+"px"}function n(){document.onmouseup=null,document.ontouchend=null,document.onmousemove=null,document.ontouchmove=null}var o,s,l,r,c;c=r=l=s=0,d(o=t).find(".header").get(0)?(d(o).find(".header").get(0).onmousedown=i,d(o).find(".header").get(0).ontouchstart=i):(o.onmousedown=i,o.ontouchstart=i)})}(jQuery);